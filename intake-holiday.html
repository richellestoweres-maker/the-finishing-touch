/* HOLIDAY (INDOOR) intake — estimate + unlock + “Go to Booking” */
try {
  const formHol = document.getElementById('intakeFormHoliday');
  if (formHol){
    formHol.addEventListener('submit', (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(formHol).entries());
      const { price, soloHours, teamHours, teardownHours, teardownPrice } = calcHoliday(data);

      const estEl = document.getElementById('estimateHoliday');
      const parts = [
        `Install (ballpark): <strong>$${price}</strong>`,
        `Estimated time: ${soloHours} solo hrs (~${teamHours} hrs with 2 stylists)`
      ];
      if (teardownHours){
        parts.push(`Teardown (optional): ~${teardownHours} hrs • approx <strong>$${teardownPrice}</strong>`);
      }
      parts.push(`<span class="hint">Materials (ribbon/ornaments/garland) are separate and billed to your budget.</span>`);
      if (estEl) estEl.innerHTML = parts.join("<br>");

      // Build a clearer booking hint for the calendar
      let hint;
      if (teamHours <= 2.5) hint = "Holiday Decorating — Small (≈2–2.5 hr)";
      else if (teamHours <= 4) hint = "Holiday Decorating — Medium (≈3–4 hr)";
      else if (teamHours <= 6) hint = "Holiday Decorating — Large (≈5–6 hr)";
      else hint = "Holiday Decorating — XL (6.5+ hr)";

      // Unlock + show button to your embedded calendar
      saveBookingUnlock(hint);
      ensureScheduleButton('estimateHoliday', (function(){
        const p = (location.pathname || "").toLowerCase();
        const onHome = /\/$|index\.html$/.test(p);
        return onHome ? "#book" : "index.html#book";
      })(), 'goBookHoliday');
    });
  }
} catch (err){ console.error("Holiday handler error:", err); }
